{% extends 'base.html' %}

{% block header %}
{% if g.user %}
<h1>{% block title %}{% endblock %}</h1>

{% else %}
    <p>Log in to view options.</p>
{% endif %}
{% endblock %}



{% block content %}
{% if g.user %}
<center><p>Welcome, {{ g.user['name_user'] }}!</p></center>
<a class="action" href="{{ url_for('pscs.create_project') }}">Create Project</a>
<a class="action" href="{{ url_for('pscs.pipeline_designer') }}">Create Analysis</a>
<p></p>
<table>
    <tr>
        <th>Project Name</th>
        <th>Role</th>
        <th>Project Members</th>
        <th>Number of Uploaded Files</th>
        <th>Description</th>
    </tr>
{% for p in projects %}
    <tr>
        <td><a href="{{ url_for('pscs.project', id_project=p['id_project']) }}">{{ p['name_project'] }}</a></td>
        <td>{{ p['role'] }}</td>
        <td>{{ p['num_members'] }}</td>
        <td>{{ p['num_files'] }}</td>
        {% if p['description']|length > 50 %}
        <td>{{ p['description'][:50] + '...'}}</td>
        {% else %}
        <td>{{ p['description'] }}</td>
        {% endif %}
    </tr>
{% endfor %}
</table>

{% endif %}

<!--<div id="drag-1" class="draggable">-->
<!--    <p> You can drag one element </p>-->
<!--</div>-->
<!--<div id="drag-2" class="draggable">-->
<!--    <p> with each pointer </p>-->
<!--</div>-->
{% endblock %}