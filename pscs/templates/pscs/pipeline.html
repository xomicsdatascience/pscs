{% extends 'base.html' %}
{% block header %}
<h2>Pipeline Designer</h2><br>
{% endblock %}


{% block content %}
<p id="textInstructions">Click on nodes in the panel to add them to the pipeline.<br>
    Drag connections from the output of a node (blue) to the input (orange) to connect two nodes.
</p>

<button id="sideToggle" class="sidebar-toggle" onclick="toggleSidebar()" style="height:100px">&rarr;</button>
<script src="static/js/pipeline.js"></script>
<script src="static/js/pipelineSidebar.js"></script>

<div id="sidebar" class="sidebar-closed">
    <button type="button" onclick="openSavePanel( &quot;{{ proj_dests }}&quot;, &quot;{{user_dests}}&quot; )">Save Pipeline</button>
    <select name="analyses" id="analyses" autocomplete="off">
        <option value="def" selected disabled>Load analysis pipeline</option>
        {% for an in analyses %}
          <option value="{{an['id_analysis']}}">{{an["analysis_name"]}}</option>
        {% endfor %}
    </select>

    <button id="analysis_load" onclick="loadAnalysis();">Load</button><br>
    {% if current_project is defined %}
        <button type="button" onclick='location.href="{{current_project}}";'>Return to current project</button>
    {% endif %}
</div>

<div id="nodeContainer" class="container"></div>

<script>
document.addEventListener('nodesLoaded', function () {loadSidebarNodes("sidebar");})
document.addEventListener('nodesLoaded', function () {toggleSidebar();})
</script>
{% endblock %}
